<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>Tianciの小窝 • Posts by &#34;hexo&#34; category</title>
        <link>https://blog.lovetianci.cn</link>
        <description>一身清贫怎敢入繁华&lt;br&gt;两袖清风岂能误佳人</description>
        <language>zh-CN</language>
        <pubDate>Fri, 06 Aug 2021 18:00:00 +0000</pubDate>
        <lastBuildDate>Fri, 06 Aug 2021 18:00:00 +0000</lastBuildDate>
        <category>技术</category>
        <category>面试题</category>
        <category>娱乐</category>
        <item>
            <guid isPermalink="true">https://blog.lovetianci.cn/Hexo/Hexo_Appveyor/</guid>
            <title>Appveyor持续集成Hexo</title>
            <link>https://blog.lovetianci.cn/Hexo/Hexo_Appveyor/</link>
            <category>技术</category>
            <pubDate>Fri, 06 Aug 2021 18:00:00 +0000</pubDate>
            <description><![CDATA[ &lt;h3 id=&#34;半年没写博客突然接触到一个新词叫做ci持续集成和cd持续交付&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#半年没写博客突然接触到一个新词叫做ci持续集成和cd持续交付&#34;&gt;#&lt;/a&gt; 半年没写博客，突然接触到一个新词叫做 CI（持续集成）和 CD（持续交付）&lt;/h3&gt;
&lt;h3 id=&#34;学习一下appveyor持续集成hexo并配置github-pages&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#学习一下appveyor持续集成hexo并配置github-pages&#34;&gt;#&lt;/a&gt; 学习一下 AppVeyor 持续集成 Hexo 并配置 GitHub Pages&lt;/h3&gt;
&lt;a id=&#34;more&#34;&gt;&lt;/a&gt;
&lt;h3 id=&#34;创建项目在-projects-页面选择你的博客源码仓库&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#创建项目在-projects-页面选择你的博客源码仓库&#34;&gt;#&lt;/a&gt; 创建项目，在 /projects 页面选择你的博客源码仓库&lt;/h3&gt;
&lt;p&gt;&lt;img data-src=&#34;project.png&#34; alt=&#34;创建项目&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;点击项目中-settings-选项卡如果项目分支不是默认的修改-default-branch&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#点击项目中-settings-选项卡如果项目分支不是默认的修改-default-branch&#34;&gt;#&lt;/a&gt; 点击项目中 SETTINGS 选项卡，如果项目分支不是默认的，修改 Default branch&lt;/h3&gt;
&lt;h3 id=&#34;再点击-environment-栏目设置4个环境变量&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#再点击-environment-栏目设置4个环境变量&#34;&gt;#&lt;/a&gt; 再点击 Environment 栏目，设置 4 个环境变量：&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;value&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;STATIC_SITE_REPO&lt;/td&gt;
&lt;td&gt;静态网址文件存放 git 地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TARGET_BRANCH&lt;/td&gt;
&lt;td&gt;分支（默认 master）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GIT_USER_EMAIL&lt;/td&gt;
&lt;td&gt;git 账号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GIT_USER_NAME&lt;/td&gt;
&lt;td&gt;git 名称&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;github-添加access-token&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#github-添加access-token&#34;&gt;#&lt;/a&gt; GitHub 添加 Access Token&lt;/h3&gt;
&lt;h3 id=&#34;在httpsciappveyorcomtoolsencrypt页面加密&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#在httpsciappveyorcomtoolsencrypt页面加密&#34;&gt;#&lt;/a&gt; 在&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jaS5hcHB2ZXlvci5jb20vdG9vbHMvZW5jcnlwdA==&#34;&gt; https://ci.appveyor.com/tools/encrypt&lt;/span&gt; 页面加密&lt;/h3&gt;
&lt;h3 id=&#34;配置ci项目根目录添加appveyoryml&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#配置ci项目根目录添加appveyoryml&#34;&gt;#&lt;/a&gt; 配置 CI，项目根目录添加 appveyor.yml&lt;/h3&gt;
&lt;figure class=&#34;highlight yaml&#34;&gt;&lt;figcaption data-lang=&#34;YAML&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;clone_depth&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;access_token&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token key atrule&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; You Access Token&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token key atrule&#34;&gt;matrix&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token key atrule&#34;&gt;nodejs_version&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; &#34;12&#34; //因为node 14版本生成页面和文件为空，这里改为12版本&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;install&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token key atrule&#34;&gt;ps&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; Install&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;Product node $env&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;nodejs_version&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; node &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;version&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; npm &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;version&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; npm install&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; npm install hexo&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;cli &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;g&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;build_script&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; hexo generate&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;artifacts&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token key atrule&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; public&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token key atrule&#34;&gt;on_success&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; git config &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;global credential.helper store&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;token key atrule&#34;&gt;ps&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt; Add&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;Content &#34;$env&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;USERPROFILE\.git&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;credentials&#34; &#34;https&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;//$($env&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;access_token)&lt;span class=&#34;token punctuation&#34;&gt;:&lt;/span&gt;x&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;oauth&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;basic@github.com`n&#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; git config &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;global user.email &#34;%GIT_USER_EMAIL%&#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; git config &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;global user.name &#34;%GIT_USER_NAME%&#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; git clone &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;depth 5 &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;q &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;branch=%TARGET_BRANCH% %STATIC_SITE_REPO% %TEMP%\static&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;site&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; cd %TEMP%\static&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;site&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; del * /f /q&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; for /d %%p IN (&lt;span class=&#34;token important&#34;&gt;*)&lt;/span&gt; do rmdir &#34;%%p&#34; /s /q&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; SETLOCAL EnableDelayedExpansion &amp;amp; robocopy &#34;%APPVEYOR_BUILD_FOLDER%\public&#34; &#34;%TEMP%\static&lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;site&#34; /e &amp;amp; IF &lt;span class=&#34;token tag&#34;&gt;!ERRORLEVEL&lt;/span&gt;&lt;span class=&#34;token tag&#34;&gt;!&lt;/span&gt; EQU 1 (exit 0) ELSE (IF &lt;span class=&#34;token tag&#34;&gt;!ERRORLEVEL&lt;/span&gt;&lt;span class=&#34;token tag&#34;&gt;!&lt;/span&gt; EQU 3 (exit 0) ELSE (exit 1))&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; git add &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;A&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; git commit &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt;m &#34;Update Static Site&#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; git push origin %TARGET_BRANCH%&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;-&lt;/span&gt; appveyor AddMessage &#34;Static Site Updated&#34;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;最后代码提交到gitappveyor会自动接收到更新并build提交到指定git仓库&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#最后代码提交到gitappveyor会自动接收到更新并build提交到指定git仓库&#34;&gt;#&lt;/a&gt; 最后代码提交到 Git，AppVeyor 会自动接收到更新并 build 提交到指定 Git 仓库&lt;/h3&gt;
&lt;h3 id=&#34;之后更新博客以及代码只需要push即可&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#之后更新博客以及代码只需要push即可&#34;&gt;#&lt;/a&gt; 之后更新博客以及代码只需要 push 即可&lt;/h3&gt;
 ]]></description>
        </item>
    </channel>
</rss>
